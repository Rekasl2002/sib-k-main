#--------------------------------------------------------------------
# Production Environment Configuration
# SIB-K MA Persis 31 Banjaran â€¢ CodeIgniter 4
#--------------------------------------------------------------------

#--------------------------------------------------------------------
# ENVIRONMENT
#--------------------------------------------------------------------
CI_ENVIRONMENT = production

#--------------------------------------------------------------------
# APLIKASI
#--------------------------------------------------------------------
# TODO: Ganti dengan domain production kamu (PAKAI https jika sudah SSL)
app.baseURL = 'https://domainkamu.tld/'
app.appName = 'SIB-K MA Persis 31 Banjaran'
app.indexPage = ''
app.defaultLocale = 'id'
app.appTimezone = 'Asia/Jakarta'

# Paksa https di semua request (ubah false kalau belum SSL)
app.forceGlobalSecureRequests = true

# CSP opsional. Kalau belum siap atur CSP, biarkan false.
app.CSPEnabled = false

#--------------------------------------------------------------------
# DATABASE - UTAMA (PRODUCTION)
#--------------------------------------------------------------------
# TODO: Isi sesuai database di aaPanel
database.default.hostname = 127.0.0.1
database.default.database = sibk_mapersis31
database.default.username = sibk_user
database.default.password = "GANTI_PASSWORD_DB_DI_SINI"
database.default.DBDriver = MySQLi
database.default.DBPrefix =
database.default.port = 3306

# Penting: jangan tampilkan error DB detail di production
database.default.DBDebug = false

database.default.charset = utf8mb4
database.default.DBCollat = utf8mb4_general_ci

#--------------------------------------------------------------------
# DATABASE - TESTING (nonaktif di production)
#--------------------------------------------------------------------
database.tests.hostname =
database.tests.database =
database.tests.username =
database.tests.password =
database.tests.DBDriver = MySQLi
database.tests.DBPrefix = test_
database.tests.charset = utf8mb4
database.tests.DBCollat = utf8mb4_general_ci
database.tests.port = 3306

#--------------------------------------------------------------------
# ENKRIPSI
#--------------------------------------------------------------------
# Pertahankan key yang sama, jangan ganti di tengah jalan kalau data terenkripsi sudah ada.
encryption.key = hex2bin:8b64f3ff37267a8fb75316ddb74de2dd03b168229b7d9366ae36b6d74cf4ce5f
encryption.driver = OpenSSL
encryption.cipher = AES-256-CTR
encryption.blockSize = 16

#--------------------------------------------------------------------
# SESSION
#--------------------------------------------------------------------
session.driver = 'CodeIgniter\Session\Handlers\FileHandler'
session.cookieName = 'sibk_session'
session.expiration = 7200
session.savePath =
session.matchIP = false
session.timeToUpdate = 300
session.regenerateDestroy = false

#--------------------------------------------------------------------
# COOKIE
#--------------------------------------------------------------------
cookie.prefix = 'sibk_'
cookie.domain = ''      # kosongkan agar mengikuti domain aktif
cookie.path = '/'
cookie.secure = true    # true jika HTTPS; ubah false jika masih HTTP
cookie.httponly = true
cookie.samesite = 'Lax'

#--------------------------------------------------------------------
# SECURITY
#--------------------------------------------------------------------
security.csrfProtection = 'session'
security.tokenName = 'csrf_token_sibk'
security.headerName = 'X-CSRF-TOKEN'
security.cookieName = 'csrf_cookie_sibk'
security.expires = 7200
security.regenerate = true
security.redirect = true

#--------------------------------------------------------------------
# LOGGER
#--------------------------------------------------------------------
# Production biasanya lebih rendah. 4 = error, 5 = warning, 9 = verbose.
# Rekomendasi aman: 4 atau 5.
logger.threshold = 5

#--------------------------------------------------------------------
# EMAIL
#--------------------------------------------------------------------
email.protocol = smtp
email.SMTPHost = smtp.gmail.com
email.SMTPUser = maspersis31banjaran@gmail.com
email.SMTPPass = "GANTI_APP_PASSWORD_SMTP_DI_SINI"
email.SMTPPort = 587
email.SMTPCrypto = tls
email.SMTPTimeout = 5
email.fromEmail = maspersis31banjaran@gmail.com
email.fromName = 'SIB-K MA Persis 31'
email.mailType = html
email.charset = UTF-8
email.wordWrap = true

#--------------------------------------------------------------------
# UPLOADS
#--------------------------------------------------------------------
upload.maxSize = 5
upload.allowedTypes = 'jpg|jpeg|png|pdf|doc|docx|xls|xlsx'

# Tetap di writable agar tidak bisa diakses langsung dari publik.
# Pastikan permission folder writable benar di server.
upload.studentPhotos = 'writable/uploads/students/photos/'
upload.documents     = 'writable/uploads/documents/'
upload.assessments   = 'writable/uploads/assessments/'
upload.reports       = 'writable/uploads/reports/'
upload.temp          = 'writable/uploads/temp/'

#--------------------------------------------------------------------
# PAGINATION
#--------------------------------------------------------------------
pagination.perPage = 20

#--------------------------------------------------------------------
# RBAC - ROLE BASED ACCESS CONTROL
#--------------------------------------------------------------------
rbac.defaultStudentRole = 'SISWA'
rbac.defaultParentRole = 'ORANG_TUA'
rbac.timeout.admin = 28800
rbac.timeout.koordinator_bk = 28800
rbac.timeout.guru_bk = 14400
rbac.timeout.wali_kelas = 14400
rbac.timeout.siswa = 7200
rbac.timeout.orang_tua = 7200

#--------------------------------------------------------------------
# BIMBINGAN KONSELING - BUSINESS RULES
#--------------------------------------------------------------------
bk.maxViolationPoints = 100
bk.defaultSessionDuration = 45
bk.maxSessionsPerDay = 8
bk.autoReportGeneration = true
bk.reportPeriod = 'bulanan'

#--------------------------------------------------------------------
# NOTIFICATION
#--------------------------------------------------------------------
notification.email.enabled = true
notification.sms.enabled = false
notification.sms.apiKey =
notification.sms.sender = 'SIBK-MAP31'

#--------------------------------------------------------------------
# THIRD PARTY INTEGRATIONS
#--------------------------------------------------------------------
google.calendar.apiKey =
google.calendar.clientId =
google.calendar.clientSecret =
whatsapp.apiKey =
whatsapp.phoneNumber =

#--------------------------------------------------------------------
# BACKUP & MAINTENANCE
#--------------------------------------------------------------------
backup.enabled = true
backup.schedule = '0 2 * * *'
backup.path = '{writable}/backups/'
backup.retention = 30

#--------------------------------------------------------------------
# DEVELOPMENT TOOLS (MATIKAN DI PRODUCTION)
#--------------------------------------------------------------------
toolbar.enabled = false
kint.enabled = false

#--------------------------------------------------------------------
# API SETTINGS (untuk future mobile app)
#--------------------------------------------------------------------
jwt.secret = "GANTI_JWT_SECRET_DI_SINI"
jwt.expiration = 3600

api.rateLimit.enabled = true
api.rateLimit.requests = 100
api.rateLimit.period = 60

#--------------------------------------------------------------------
# MONITORING & ANALYTICS
#--------------------------------------------------------------------
analytics.googleId =
monitoring.enabled = true
monitoring.sentry.dsn =

#--------------------------------------------------------------------
# CUSTOM SETTINGS SEKOLAH
#--------------------------------------------------------------------
school.name = 'Madrasah Aliyah Persis 31 Banjaran'
school.address = 'Jl. Raya Banjaran, Kab. Bandung'
school.phone = '022-XXXXXXXX'
school.email = 'info@mapersis31.sch.id'
school.website = 'https://mapersis31.sch.id'
school.logo = 'assets/images/logo-mapersis31.png'
school.activeAcademicYear = '2024/2025'
school.activeSemester = 'GENAP'

#--------------------------------------------------------------------
# FEATURE FLAGS
#--------------------------------------------------------------------
feature.studentPortal = true
feature.parentPortal = true
feature.assessmentModule = true
feature.careerInfo = true
feature.messaging = true
feature.reporting = true
feature.bulkImport = true

#--------------------------------------------------------------------
# PERFORMANCE
#--------------------------------------------------------------------
performance.queryCaching = true
performance.viewCaching = false
performance.minifyAssets = false

#--------------------------------------------------------------------
# END
#--------------------------------------------------------------------
